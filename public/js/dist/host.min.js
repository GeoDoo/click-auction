const socket=io();let isAuthenticated=!1;function getAuthToken(){const t=document.cookie.match(/host_auth=([^;]+)/);return t?t[1]:null}function startAuction(){if(!isAuthenticated)return void Logger.warn("Cannot start auction - not authenticated");const t=parseInt(document.getElementById("duration").value,10)||10;Logger.debug("Starting auction with duration:",t),socket.emit("startAuction",{duration:t})}function resetAuction(){isAuthenticated?socket.emit("resetAuction"):Logger.warn("Cannot reset auction - not authenticated")}function updateUI(t){document.getElementById("playerCount").textContent=`${t.playerCount} Players Connected`;const e="countdown"===t.status||"bidding"===t.status;document.getElementById("startBtn").disabled=e,document.getElementById("resetBtn").disabled=e}function resetAllTimeStats(){isAuthenticated?confirm("⚠️ This will permanently delete ALL player stats. Are you sure?")&&(socket.emit("resetAllTimeStats"),alert("All-time stats have been reset!")):Logger.warn("Cannot reset stats - not authenticated")}socket.on("connect",()=>{Logger.debug("Socket connected:",socket.id);const t=getAuthToken();t?socket.emit("authenticateHost",{token:t}):Logger.warn("No auth token found - host controls will not work")}),socket.on("hostAuthenticated",t=>{isAuthenticated=t.success,isAuthenticated?(Logger.debug("Host socket authenticated"),document.getElementById("startBtn").disabled=!1):(Logger.error("Host socket authentication failed"),alert("Authentication failed. Please refresh and log in again."))}),socket.on("connect_error",t=>{Logger.error("Socket connection error:",t.message)}),socket.on("gameState",updateUI),window.startAuction=startAuction,window.resetAuction=resetAuction,window.resetAllTimeStats=resetAllTimeStats;