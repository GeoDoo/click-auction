const form=document.getElementById("loginForm"),pinInput=document.getElementById("pin"),submitBtn=document.getElementById("submitBtn"),errorMessage=document.getElementById("errorMessage");form.addEventListener("submit",async t=>{t.preventDefault();const e=pinInput.value.trim();if(e){submitBtn.disabled=!0,submitBtn.textContent="Verifying...",errorMessage.textContent="",pinInput.classList.remove("error");try{const t=await fetch("/api/host/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pin:e})}),n=await t.json();if(!n.success)throw new Error(n.message||"Invalid PIN");n.token?(document.cookie=`hostAuth=${n.token}; path=/; max-age=86400; SameSite=Lax`,window.location.href=`/host?auth=${encodeURIComponent(n.token)}`):window.location.href="/host"}catch(t){errorMessage.textContent=t.message||"Authentication failed",pinInput.classList.add("error"),pinInput.value="",pinInput.focus()}finally{submitBtn.disabled=!1,submitBtn.textContent="ðŸš€ Access Host Panel"}}}),pinInput.focus();