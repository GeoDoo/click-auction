const SoundManager={ctx:null,enabled:!0,initialized:!1,unlocked:!1,async init(){if(!this.initialized||!this.unlocked)try{if(this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext),this.initialized=!0),"suspended"===this.ctx.state&&await this.ctx.resume(),!this.unlocked){const t=this.ctx.createOscillator(),e=this.ctx.createGain();e.gain.value=.001,t.connect(e),e.connect(this.ctx.destination),t.start(),t.stop(this.ctx.currentTime+.01),this.unlocked=!0,Logger.debug("Audio unlocked")}}catch(t){Logger.warn("Sound initialization failed:",t.message)}},beep(t=440,e=.1,i="sine",n=.5){if(this.ctx&&this.enabled&&this.unlocked)try{const c=this.ctx.createOscillator(),s=this.ctx.createGain();c.type=i,c.frequency.setValueAtTime(t,this.ctx.currentTime),s.gain.setValueAtTime(n,this.ctx.currentTime),s.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+e),c.connect(s),s.connect(this.ctx.destination),c.start(this.ctx.currentTime),c.stop(this.ctx.currentTime+e)}catch(t){Logger.warn("Beep failed:",t.message)}},tap(){this.beep(880,.04,"square",.4)},countdownTick(){this.beep(520,.15,"sine",.6)},go(){if(this.ctx&&this.enabled&&this.unlocked)try{const t=this.ctx.createOscillator(),e=this.ctx.createGain();t.type="sawtooth",t.frequency.setValueAtTime(400,this.ctx.currentTime),t.frequency.exponentialRampToValueAtTime(900,this.ctx.currentTime+.25),e.gain.setValueAtTime(.5,this.ctx.currentTime),e.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+.35),t.connect(e),e.connect(this.ctx.destination),t.start(this.ctx.currentTime),t.stop(this.ctx.currentTime+.35)}catch(t){Logger.warn("Go sound failed:",t.message)}},winner(){if(!this.ctx||!this.enabled||!this.unlocked)return;[523,659,784,1047,1319].forEach((t,e)=>{setTimeout(()=>this.beep(t,.45,"sine",.6),120*e)})},end(){this.beep(330,.3,"sine",.4)},toggle(){return this.enabled=!this.enabled,Logger.info("Sound "+(this.enabled?"enabled":"disabled")),this.enabled}};document.addEventListener("click",()=>SoundManager.init(),{once:!1}),document.addEventListener("touchstart",()=>SoundManager.init(),{once:!1}),window.SoundManager=SoundManager;